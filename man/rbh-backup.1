.\" Text automatically generated by txt2man
.TH rbh-backup 1 "14 May 2014" "" ""
.SH NAME
\fBrbh-backup \fP- policy engine and statistics tool for large file systems
.SH SYNOPSIS
.nf
.fam C
  \fBrbh-backup\fP [\fIoptions\fP]

.fam T
.fi
.fam T
.fi
.SH ACTIONS

.TP
.B
\fB-S\fP, \fB--scan\fP[=\fIdir\fP]
Scan the filesystem namespace. If \fIdir\fP is specified, only scan the specified subdir.
.TP
.B
\fB-M\fP, \fB--migrate\fP
Copy "dirty" entries to HSM.
.TP
.B
\fB-r\fP, \fB--read-log\fP[=\fImdt_idx\fP]
Read events from MDT ChangeLog.
If \fImdt_idx\fP is specified, only read ChangeLogs for the given MDT.
Else, start 1 changelog reader thread per MDT (with DNE).
.TP
.B
\fB-R\fP, \fB--hsm-remove\fP
Perform deferred removal in HSM.
.PP
Note: if no action is specified, the default action set is: \fB--read-log\fP \fB--migrate\fP \fB--hsm-remove\fP
.SH OUTPUT OPTIONS

.TP
.B
\fB--diff\fP=\fIattrset\fP
When scanning or reading changelogs, display changes for the given set of attributes (to stdout).
\fIattrset\fP is a list of values in: path,posix,stripe,all,notimes,noatime.
.SH MANUAL MIGRATION ACTIONS

.TP
.B
\fB-s\fP, \fB--sync\fP
Immediately migrate all modified files, ignoring policy conditions.
It is equivalent to "\fB--migrate\fP \fB--ignore-policies\fP \fB--once\fP \fB--no-limit\fP".
.TP
.B
\fB--migrate-ost\fP=\fIost_index\fP
Apply migration policies to files on the given OST \fIost_index\fP.
.TP
.B
\fB--migrate-user\fP=\fIuser_name\fP
Apply migration policies to files owned by \fIuser_name\fP.
.TP
.B
\fB--migrate-group\fP=\fIgrp_name\fP
Apply migration policies to files of group \fIgrp_name\fP.
.TP
.B
\fB--migrate-class\fP=\fIfileclass\fP
Apply migration policy on files in the given \fIfileclass\fP.
.TP
.B
\fB--migrate-file\fP=\fIfilepath\fP
Apply migration policy to a single file \fIfilepath\fP.
.SH BEHAVIOR OPTIONS

.TP
.B
\fB--dry-run\fP
Only report actions that would be performed (rmdir, migration, purge)
without really doing them. Robinhood DB contents are however impacted.
.TP
.B
\fB-i\fP, \fB--ignore-policies\fP
Force migration/purge of all eligible files, ignoring policy conditions.
.TP
.B
\fB-O\fP, \fB--once\fP
Perform only one pass of the specified action and exit.
.TP
.B
\fB-d\fP, \fB--detach\fP
Daemonize the process (detach from parent process).
.TP
.B
\fB--no-limit\fP
Don't limit the maximum number of migrations (per pass).
.TP
.B
\fB--no-gc\fP
Garbage collection of entries in DB is a long operation when terminating
a scan. This skips this operation if you don't care about removed
entries (or don't expect entries to be removed).
This is also recommended for partial scanning (see \fB-scan\fP=\fIdir\fP option).
.SH CONFIG FILE OPTIONS

.TP
.B
\fB-f\fP \fIcfg_file\fP, \fB--config-file\fP=\fIcfg_file\fP
Path to configuration file (or short name).
.TP
.B
\fB-T\fP \fIoutput_file\fP, \fB--template\fP[=\fIoutput_file\fP]
Write a configuration file template to the specified file.
.TP
.B
\fB-D\fP, \fB--defaults\fP
Display default configuration values.
.TP
.B
\fB--test-syntax\fP
Check configuration file and exit.
.SH LOG OPTIONS

.TP
.B
\fB-L\fP \fIlogfile\fP, \fB--log-file\fP=\fIlogfile\fP
Force the path to the log file (overrides configuration value).
Special values "stdout" and "stderr" can be used.
.TP
.B
\fB-l\fP \fIloglevel\fP, \fB--log-level\fP=\fIloglevel\fP
Force the log verbosity level (overrides configuration value).
Allowed values: CRIT, MAJOR, EVENT, VERB, DEBUG, FULL.
.SH MISCELLANEOUS OPTIONS

.TP
.B
\fB-h\fP, \fB--help\fP
Display a short help about command line \fIoptions\fP.
.TP
.B
\fB-V\fP, \fB--version\fP
Display version info
.TP
.B
\fB-p\fP \fIpidfile\fP, \fB--pid-file\fP=\fIpidfile\fP
Pid file (used for service management).
.SH SEE ALSO
\fBrbh-backup-report\fP(1),\fBrbh-backup\fP-find(1),\fBrbh-backup\fP-du(1)
